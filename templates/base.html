<!DOCTYPE html>
<html lang="{{ lang | default(value='pl-PL') }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data: blob:; media-src 'self' https: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https:; connect-src 'self' https: wss:; worker-src 'self' blob:; frame-src 'self' https:; object-src 'none'; form-action 'self'; base-uri 'self'; upgrade-insecure-requests;">
  <link rel="stylesheet" href="/css/layout.css">
  {% include "favicon.html" ignore missing %}

  <title>{% block title %}{{ config.title }}{% endblock %}</title>
  {% include "seo_tags.html" ignore missing %}
  <meta name="referrer" content="strict-origin-when-cross-origin">

  {% if config.generate_feeds %}
    {% block rss %}
      {% for feed_filename in config.feed_filenames %}
        <link rel="alternate" type="{% if feed_filename == 'atom.xml' %}application/atom+xml{% else %}application/rss+xml{% endif %}" title="{{ config.title }}" href="{{ get_url(path=feed_filename) | safe }}">
      {% endfor %}
    {% endblock %}
  {% endif %}

  {% include "custom_head.html" ignore missing %}

  <script>
    const theme = localStorage.getItem('theme') || 'standard';
    document.documentElement.className = theme;
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = `/css/${theme}.css`;
    document.head.appendChild(link);
  </script>
</head>
<body>
  {% include "header.html" ignore missing %}

  {% block main %}{% endblock %}
  {% include "footer.html" ignore missing %}
  {% include "custom_body.html" ignore missing %}

  <script src="/js/theme.js"></script>
</body>
</html>
